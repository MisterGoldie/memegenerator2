import { bytesToHex, bytesToString } from 'viem';
import { verifyMessage } from './verifyMessage.js';
export async function verifyCastAction(parameters) {
    const { message } = await verifyMessage(parameters);
    const castActionData = messageToCastActionData(message);
    return { castActionData };
}
////////////////////////////////////////////////////////////////////
// Utilties
export function messageToCastActionData(message) {
    const frameActionBody = message.data?.body.value;
    const castActionData = {
        castId: {
            fid: Number(frameActionBody.castId?.fid),
            hash: bytesToHex(frameActionBody.castId?.hash),
        },
        fid: Number(message.data?.fid),
        messageHash: bytesToHex(message.hash),
        network: message.data?.network,
        timestamp: message.data?.timestamp,
        url: bytesToString(frameActionBody.url),
        buttonIndex: frameActionBody.buttonIndex,
    };
    return castActionData;
}
//# sourceMappingURL=verifyCastAction.js.map